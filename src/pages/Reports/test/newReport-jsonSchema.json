{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$ref": "#/definitions/NewReport",
  "definitions": {
    "NewReport": {
      "type": "object",
      "additionalProperties": false,
      "description": "A new report object compiled using a dialog within FixMy Berlin",
      "properties": {
        "location": {
          "$ref": "#/definitions/Location"
        },
        "what": {
          "$ref": "#/definitions/What"
        }
      },
      "required": [
        "location",
        "what"
      ],
      "title": "NewReport"
    },
    "Location": {
      "type": "object",
      "description": "Holds latitidude and longitude as geographical coordinates on a WGS 84 ellipsoid (EPSG:4326)",
      "additionalProperties": false,
      "properties": {
        "address": {
          "type": "string"
        },
        "lngLat": {
          "$ref": "#/definitions/LngLat"
        }
      },
      "required": [
        "address",
        "lngLat"
      ],
      "title": "Location"
    },
    "LngLat": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "lng": {
          "type": "number",
          "description": "This should actually be restricted to the spatial extent of Friedrichshain-Kreuzberg",
          "minimum": -180,
          "maximum": 180
        },
        "lat": {
          "type": "number",
          "minimum": -90,
          "maximum": 90
        }
      },
      "required": [
        "lat",
        "lng"
      ],
      "title": "LngLat"
    },
    "What": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ironings": {
          "$ref": "#/definitions/Ironings"
        },
        "additionalInfo": {
          "$ref": "#/definitions/AdditionalInfo"
        }
      },
      "required": [
        "additionalInfo",
        "ironings"
      ],
      "title": "What"
    },
    "AdditionalInfo": {
      "title": "AdditionalInfo",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "photo": {
          "type": "string",
          "description": "Image as base64 encoded string"
        },
        "description": {
          "type": "string",
          "maxLength": 140,
          "description": "Further comment on the location or subject"
        }
      },
      "anyOf": [
        {
          "required": [
            "photo"
          ]
        },
        {
          "required": [
            "description"
          ]
        }
      ]
    },
    "Ironings": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "ironingsNeeded": {
          "type": "integer",
          "minimum": 1,
          "maximum": 20
        },
        "ironingsPlacement": {
          "type": "string",
          "enum": [
            "SIDEWALK",
            "STREET"
          ],
          "description": "Where an ironing shall be placed"
        },
        "paymentReservesBikePark": {
          "type": "integer",
          "minimum": 0,
          "maximum": 5,
          "description": "How much the person is willing to spend per day in EUR"
        }
      },
      "required": [
        "ironingsNeeded",
        "ironingsPlacement",
        "paymentReservesBikePark"
      ],
      "title": "Ironings"
    }
  }
}
